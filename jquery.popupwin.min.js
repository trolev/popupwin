/*!
 * Popupwin
 * Version: v.3.0.2 (2013-04-21)
 * 
 * https://github.com/trolev/Popupwin/
 * 
 * Popupwin plugin is MIT License released. Point free to use it for personal and commercial need
*/
(function(d){var h=d(window),k=d(document),j=void 0!==document.createTouch,g=j?"touchend.pw":"click.pw",e=d('<div style="position:fixed; left:0; right:0; top:0; bottom:0;display:none;z-index:999;"></div>'),m={left:-9E5,top:-9E5,display:"block"};d("body").append(e);var l={pwinBlock:!1,pwinClose:".close",pwinBack:"#000",pwinOpacity:0.3,pwinSpeed:400,pwinAnimate:!0,callbackOpen:!1,callbackClose:!1},f={init:function(b){return this.each(function(){var a=d(this),c=d.extend({},l,b),e=c.pwinBlock?"object"=== typeof c.pwinBlock?c.pwinBlock:d(c.pwinBlock):d(a.attr("href"));e.length&&(a.block=e,a.cls="object"===typeof c.pwinClose?c.pwinClose:d(c.pwinClose,e),a.on(g,function(b){b.preventDefault();"function"===typeof c.callbackOpen&&c.callbackOpen(e,a);f.setPosition(e);f.show(a,c);b.preventDefault();return!1}))})},setPosition:function(b){b.css(m);var a=j&&window.innerHeight?window.innerHeight:h.height(),c=j&&window.innerWidth?window.innerWidth:h.width(),d=b.innerHeight(),e=b.innerWidth(),f=h.scrollTop(),g= h.scrollLeft(),a=0.5*a-0.5*d+f,c=0.5*c-0.5*e+g;b.hide().css({left:0>c?g:c,top:0>a?f:a,"z-index":1E3})},show:function(b,a){e.css({"background-color":a.pwinBack});a.pwinAnimate?(e.fadeTo(a.pwinSpeed,a.pwinOpacity),b.block.fadeTo(a.pwinSpeed,1)):(e.css("opacity",a.pwinOpacity).show(),b.block.show());f.closeEvents(b,a)},closeEvents:function(b,a){e.on(g,function(c){c.preventDefault();f.close(b,a);return!1});b.cls.on(g,function(c){c.preventDefault();f.close(b,a);return!1});k.on("keydown.pw",function(c){27=== (c.which||c.keyCode)&&f.close(b,a)})},close:function(b,a){a.pwinAnimate?(e.fadeOut(a.pwinSpeed),b.block.fadeOut(a.pwinSpeed,function(){"function"===typeof a.callbackClose&&a.callbackClose(b.block,b)})):(e.hide(),b.block.hide(),"function"===typeof a.callbackClose&&a.callbackClose(b.block,b));k.off(".pw");b.cls.off(".pw");e.off(".pw")},open:function(b){return this.each(function(){var a=d(this),c=d.extend({},l,b);"function"===typeof c.callbackOpen&&c.callbackOpen(a);a.block=a;a.cls="object"===typeof c.pwinClose? c.pwinClose:d(c.pwinClose,a);f.setPosition(a);f.show(a,c)})},center:function(){return this.each(function(){f.setPosition(d(this))})}};d.fn.popupwin=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return f.init.apply(this,arguments);d.error("Method named "+b+" does not exist to jQuery.popupwin")}})(jQuery);